{{ 'custom-filter-style.css' | asset_url | stylesheet_tag }}

<div class="dropdown">
  <button class="dropbtn">Filter By 
    <img src={{ 'angel-right.png' | asset_url }} class="arrow-right" width="9" height="12" />
    <img src={{ 'arrow-down.png' | asset_url }} class="arrow-down" width="12" height="9" />
  </button>
  <div class="dropdown-content"> 
    <form id="filter-form">
      {%- for filter in results.filters -%}
        {% if filter.type != "price_range"  %}
          <hr />
          <div class="checkbox-btns-wrapper">
            <div class="checkbox-btn" >
              <span>{{ filter.label }}</span>
              <img src={{ 'minus-sign.png' | asset_url }} class="minus-sign-img"  />
              <img src={{ 'plus-img.png' | asset_url }} class="plus-sign-img" />
            </div>
            {% for value in filter.values -%}
              <label class="checkbox-container">
                <input type="checkbox" name="{{ value.param_name }}" value="{{ value.value }}" {% if value.active -%}checked{%- endif %}>
                <span class="checkbox-custom"></span> 
                <span>{{- value.label  -}}</span>
              </label>
            {%- endfor %}
          </div>
        {% endif %}
      {% endfor %}
     </form>
  </div>
</div>
  <script src={{ 'jquery.min.js' | asset_url }}></script>
  <script>
      $(".dropbtn").click(function(){
        $(".dropdown-content").slideToggle();
        $(".dropbtn").toggleClass("open-dropdown-content");
      });
    $(".checkbox-btn").click(function (e) {
      $(this).closest(".checkbox-btns-wrapper").find(".checkbox-container").slideToggle();
      $(this).closest(".checkbox-btns-wrapper").find(".checkbox-btn").toggleClass("open-dropdown-content")
      // $('.checkbox-btn').toggleClass("open-dropdown-content")
    });

    document.querySelectorAll("#filter-form input[type='checkbox']").forEach((checkbox) => {
    checkbox.addEventListener("change", function () {
      document.getElementById("filter-form").submit();
    });
  });
  document.getElementById("filter-form").addEventListener("submit", function(event) {
    event.preventDefault();
    
    const formData = new FormData(this);
    const params = new URLSearchParams(formData).toString();
    
    window.location.href = `${window.location.pathname}?${params}`;
  });
</script>
